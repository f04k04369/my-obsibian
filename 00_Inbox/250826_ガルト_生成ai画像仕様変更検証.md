---
created: 2025-08-26
tags:
  - 業務
  - 検証
  - 調査
  - BottoK
aliases:
  - ガルト
  - 生成ai
  - 検証
reration:
---
# 汎用テンプレート: 家具画像の寸法・形状変換と比較検証 要件定義書（template_generic.md）

  

****ドキュメント種別****: テンプレート  

****テンプレ版****: v1.0  

****最終更新****: 2025-08-26  

****作成者****: 藤澤光介 / ChatGPT

  

---

  

## 1. 目的 / スコープ

任意の****家具画像****（椅子、机、棚、ソファ等）に対して、指定した****属性****（例: 座面高・天板高・奥行・幅・脚長・背もたれ角度 等）を、

- ****A: 仕様書なし（相対）**** と  

- ****B: 仕様書あり（数値キャリブレーション）****  

の2方式で変換し、****出力画像＋機械可読サマリ****を生成、差分を定量/定性で比較検証できるようにする。

  

---

  

## 2. 入力要件

- ****必須****: 元画像（1枚以上、推奨: 正面 or 属性に最も寄与する視点）  

- ****任意****: 仕様書画像（寸法注記がある図/写真）またはCAD/寸法PDF  

- ****パラメータ（共通）****: 

  

```json

{

  "product_id": "{{PRODUCT_ID}}",

  "attribute": "{{ATTRIBUTE}}",              // 例: seat_height, tabletop_height, width, depth, leg_length, tilt_angle など

  "operation": "delta | target",             // 差分指定か目標値指定か

  "value": {{VALUE}},                        // 数値（例: 300）

  "unit": "mm | cm | deg | %",               // 単位（角度・比率にも対応）

  "tolerance_relative": 0.03,                // B方式の許容相対誤差（例: 3%）

  "notes": "{{FREE_TEXT}}"

}

```

  

### 2.1 前提

- 背景・照明は可能な限り元画像のまま保持。  

- 複数視点がある場合は、****当該属性の主軸が最も明瞭****な視点を選択。  

- 仕様書がある場合、****px↔単位****の換算係数を確立する（§4）。

  

---

  

## 3. 出力要件

### 3.1 画像（最低2点）

1) ****A_relative**** … 仕様書なしの相対変換  

2) ****B_calibrated**** … 仕様書ありの数値キャリブレーション変換  

  

#### 共通

- 構図・画角・解像度: 元画像に準拠（推奨 1024px 以上）  

- 変換は****指定属性に最小限限定****（他部位の比率を極力保持）  

- 光源方向・影・反射は変換後の形状/位置に追従させる  

- 形式: PNG（8bit sRGB）

  

#### ファイル命名規則

```

{product_slug}_{attribute}_{operation}{value}{unit}_{variant}.png

例) chair_seat_height_delta300mm_B_calibrated.png

```

  

### 3.2 JSONサマリ（1点）

- ファイル名: `{product_slug}_{attribute}_summary.json`  

- ****汎用スキーマ****（例）:

```json

{

  "version": "v1",

  "task": "attribute_transform_compare",

  "product": {

    "id": "{{PRODUCT_ID}}",

    "name": "{{PRODUCT_NAME}}",

    "category": "{{CATEGORY}}"

  },

  "attribute": "{{ATTRIBUTE}}",

  "operation": "delta | target",

  "value": {{VALUE}},

  "unit": "mm | cm | deg | %",

  "calibration": {

    "used": true,

    "source": "spec_image | cad | none",

    "references": [

      { "label": "ref1_overall_height", "unit": "cm", "value": 90.0, "pixel_length": 812 }

    ],

    "scale_factor_px_per_unit": 9.02

  },

  "variants": [

    {

      "id": "A_relative",

      "assumption": "no numeric calibration; visual-relative transform",

      "estimated_accuracy_score": 0.0,

      "qc_scores": {

        "dimension_match": 0.0,

        "proportion_consistency": 0.0,

        "material_continuity": 0.0,

        "shading_alignment": 0.0,

        "perspective_consistency": 0.0,

        "physical_plausibility": 0.0,

        "artifact_suppression": 0.0

      },

      "notes": ""

    },

    {

      "id": "B_calibrated",

      "assumption": "numeric calibration via spec; px↔unit established",

      "estimated_accuracy_score": 0.0,

      "qc_scores": {

        "dimension_match": 0.0,

        "proportion_consistency": 0.0,

        "material_continuity": 0.0,

        "shading_alignment": 0.0,

        "perspective_consistency": 0.0,

        "physical_plausibility": 0.0,

        "artifact_suppression": 0.0

      },

      "notes": ""

    }

  ],

  "recommended_use": "Prefer B_calibrated for spec-critical deliverables; A_relative for concept previews."

}

```

> スコアは0–5段階、案件ごとに記録更新。

  

---

  

## 4. 内部処理要件（方式）

### 4.1 A: 相対変換（仕様書なし）

- 視覚的一貫性を優先し、****対象属性の軸方向****に形状をスケーリング/シフト。  

- 周辺部位の変形は最小化（メッシュ/ワーピング時は境界ブレンド）。

  

### 4.2 B: 数値キャリブレーション（仕様書あり）

1. 仕様書画像から****基準長****（1つ以上）を取得（例: 全高、幅、脚間距離）。  

2. 画像上の****対応ピクセル長****を計測し、`px_per_unit` を算出。  

3. 指定 `operation` に応じて****ターゲット値****を決定：  

   - `delta`: `target = original + value`  

   - `target`: `target = value`  

4. 対象属性の****主軸方向****に対し幾何変換を適用、****影/反射/接地****を再計算。  

5. 変換後、****誤差 = |measured - target| / target**** を算出。

  

---

  

## 5. 受入基準（QC & 許容誤差）

- ****寸法整合****:  

  - B: 線寸法 ±3% 以内 / 角度 ±1.5° / 比率 ±3%  

  - A: 線寸法 ±5–8%（目視許容）

- ****比率維持****（proportion_consistency）: 主要部位比 ±5% 以内  

- ****素材連続性****（material_continuity）: テクスチャ伸び・継ぎ目破綻なし  

- ****陰影整合****（shading_alignment）: 光源・影の位置/濃度が自然  

- ****パース整合****（perspective_consistency）: 垂直/収束の破綻なし  

- ****物理妥当性****（physical_plausibility）: 重心・接地・可動範囲の矛盾なし  

- ****アーティファクト抑制****: 二重輪郭、にじみ、エッジ破断なし

  

### 5.1 判定表（例）

| 観点 | 合格閾値（B / A） |

|---|---|

| 寸法整合 | 4.5/5 / 3.8/5 |

| 比率維持 | 4.5/5 / 4.0/5 |

| 素材連続性 | 4.6/5 / 4.2/5 |

| 陰影整合 | 4.5/5 / 4.2/5 |

| 総合 | 4.5/5（B優先） |

  

---

  

## 6. 納品物

1. `{product_slug}_{attribute}_{operation}{value}{unit}_A_relative.png`  

2. `{product_slug}_{attribute}_{operation}{value}{unit}_B_calibrated.png`  

3. `{product_slug}_{attribute}_summary.json`  

4. （任意）`{product_slug}_{attribute}_AB_compare.png`（A/B横並び）

  

---

  

## 7. 実行手順（ワークフロー）

1. 入力画像の視点・解像度・歪みを確認。  

2. ****B****の場合: 仕様書画像から基準長→`px_per_unit`を算出し保存。  

3. `operation`に従いターゲット値を決定し、幾何変換を適用。  

4. 影・反射・接地線を更新。  

5. QCチェックでスコアリングしJSONへ記録。  

6. 画像/JSONを書き出し、命名規則に従って保存。

  

---

  

## 8. 複数属性・複数製品への拡張

- 属性配列を受け取り、****バッチ実行****（例: 幅+100mm／奥行-50mm／角度+10°）。  

- それぞれ ****A/B画像＋共通JSON****に追記。  

- 比較ダッシュボード（サムネ＋主要スコア）を別途生成可能。

  

---

  

## 9. メタデータ / タグ

- `project`: GenericFurnitureTransform  

- `category`: furniture (generic)  

- `lighting`: soft studio (or original)  

- `background`: original

  

---

  

## 10. 変更履歴

- v1.0: 初版（汎用化、角度/比率指定に対応）

  

---

  

### 付録A: QCチェックリスト（実査用）

- [ ] 寸法/角度 目標値と誤差 **__**__ （単位/比率）  

- [ ] 比率整合（主要部位） ±**__**__%  

- [ ] 素材連続性 OK / NG  

- [ ] 陰影整合 OK / NG  

- [ ] パース整合 OK / NG  

- [ ] 物理妥当性 OK / NG  

- [ ] アーティファクト無し